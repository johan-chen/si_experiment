{{ extends "si_experiment/Page.html" }}
{{ block title }}
    Revision Ihrer Schätzung
{{ endblock }}
{{ block content }}

<head>
    <script>
        var c_open = {"dev": 0, "acc": 0};
        var c_close = {"dev": 0, "acc": 0};


        function showDivAndCount(my_button){
            var div = document.getElementById(my_button);

            if (div.style.display == "none") {
                div.style.display = "block";
                c_open[my_button] += 1;
                document.getElementById("click_" + my_button + "_open").value = c_open[my_button];
            } else {
                div.style.display = "none";
                c_close[my_button] += 1;
                document.getElementById("click_" + my_button + "_close").value = c_close[my_button];
            }
        }


        $(document).ready(function() {
            // count clicks
            document.getElementById("click_dev_open").value = c_open["dev"];
            document.getElementById("click_dev_close").value = c_close["dev"];
            document.getElementById("click_acc_open").value = c_open["acc"];
            document.getElementById("click_acc_close").value = c_close["acc"];

            // create slider
            var slider = document.getElementById('slider_estimator');
            createSliderEstimate(slider)

            // write slider results into form field for data export
            document.getElementById("next-button").addEventListener("click", function (){
                document.getElementById("revision").value = parseInt(slider.noUiSlider.get(true))
            });
        })
    </script>
</head>

In diesem Schritt erhalten Sie die <b>Möglichkeit</b>, Ihre abgegebene <b>Schätzung noch einmal anzupassen</b>. Dazu zeigen wir
Ihnen erneut die Eigenschaften der Immobilie sowie die Preisvorhersage der KI. Außerdem können Sie sich noch einmal -- falls
gewünscht -- die Vorhersagegenauigkeit der KI und das Profil der KI-Entwicklerin ansehen: klicken Sie dazu einfach auf den
entsprechenden Button.

<br><br>

<table id="button_table" class="tab_slider">
    <tr>
        <td>
            <div style="text-align:center" >
                <button type="button"  class="btn btn-secondary" onclick="showDivAndCount('dev')" style="margin:10px">
                    Profil KI Entwickler
                </button>
            </div>
        </td>
        <td>
            <div style="text-align:center" >
                <button type="button"  class="btn btn-secondary" onclick="showDivAndCount('acc')" style="margin:10px">
                    KI Vorhersagegenauigkeit
                </button>
            </div>
        </td>
    </tr>
    <tr>
        <td>
            <div id="dev" style="display:none; border: 1px solid grey; padding: 10px">
                 <table>
                                <tr>
                                    <td><ul><li>Geschlecht:</li></ul></td>
                                    <td style="padding-left:10px">männlich</td>
                                </tr>
                                <tr>
                                    <td><ul><li>Migrationshintergrund:</li></ul></td>
                                    <td style="padding-left:10px">keinen</td>
                                </tr>
                                <tr>
                                    <td><ul><li>Politische Ansicht:</li></ul></td>
                                    <td style="padding-left:10px">eher rechts</td>
                                </tr>
                 </table>
            </div>
        </td>
        <td>
             <div id="acc" style="display:none; border: 1px solid grey; padding: 10px">
                 <table>
                    <tr>
                        <td class="treatment_elem">
                            Die <b>Genauigkeit</b> des Algorithmus: 80 %
                        </td>
                    </tr>
                 </table>
             </div>
        </td>
    </tr>
</table>


<input type="hidden" name="click_dev_open" id="click_dev_open" />
{{ formfield_errors "click_dev_open" }}
<input type="hidden" name="click_dev_close" id="click_dev_close" />
{{ formfield_errors "click_dev_close" }}
<input type="hidden" name="click_acc_open" id="click_acc_open" />
{{ formfield_errors "click_acc_open" }}
<input type="hidden" name="click_acc_close" id="click_acc_close" />
{{ formfield_errors "click_acc_close" }}


<br><br>

<table id="real-estate-properties_1" class="real_estate_properties">
    <tr>
        <th colspan="2" style="text-align: center">Eigenschaften der Immobilie</th>
    </tr>

    <tr>
        <td>Stadt</td>
        <td>Frankfurt am Main</td>
    </tr>
    <tr>
        <td>Wohnfläche</td>
        <td>74 m<sup>2</sup>  </td>
    </tr>
    <tr>
        <td>Etage</td>
        <td>3. Obergeschoss</td>
    </tr>
    <tr>
        <td>Aufzug</td>
        <td>Ja</td>
    </tr>
    <tr>
        <td>Anzahl Zimmer</td>
        <td>3</td>
    </tr>
    <tr>
        <td>Baujahr</td>
        <td>2019</td>
    </tr>
    <tr>
        <td>Arbeitslosenquote Stadtteil    <br>(innerstädt. Vergleich)</td>
        <td>Unterdurchschnittlich</td>
    </tr>
</table>

<br>

<table id="prediction_1" class="ai_prediction">
    <tr>
        <th bgcolor="white">KI Vorhersage:</th>
        <th bgcolor="white" style="text-align: center;" >400.000,- EUR</th>
    </tr>
</table>

<br><br>

Falls Sie Ihre Schätzung revidieren möchten, ziehen Sie den Schieberegler an die entsprechende Position.
<br><br><br>
<table id="estimator_revise" class="tab_slider">
    <tr>
        <th><div id="slider_estimator"></div></th>
    </tr>
</table>

<input type="hidden" name="revision" id="revision" />

<br><br><br>

Wie sicher sind Sie sich mit dieser Entscheidung? Angabe von 1 (unsicher) bis 5 (sicher).

<table id="confidence_revise" class="tab_slider">
    <tr>
        <td><div>{{ formfield "confRevision" }} </div></td>
    </tr>
</table>

<br><br>


{{ formfield_errors 'revision' }}

<button id="next-button" class="otree-btn-next btn btn-primary">
    Weiter
</button>

{{ endblock }}


