{{ extends "si_experiment/Page.html" }}
{{ block title }}
    Fragen
{{ endblock }}
{{ block content }}
<head>
    <script>
        var slider_importances = ["slider_importance_sex", "slider_importance_migration_bg", "slider_importance_pol_views"]
        var importances = ["importance_sex", "importance_migration_bg", "importance_pol_views"]
        $(document).ready(function() {
            var slider = document.getElementById('slider_pol_views');
            createSliderPol(slider)

            // create slider for importances
            for (let [i, slid] of slider_importances.entries()) {
                slider_importances[i] = document.getElementById(slid)
                createSlider(slider_importances[i])
            }

            // write slider results into form field for data export
            document.getElementById("next-button").addEventListener("click", function (){

                document.getElementById("pol_views").value = parseInt(slider.noUiSlider.get(true))
                for (let [i, imp] of importances.entries()) {
                    document.getElementById(imp).value = parseInt(slider_importances[i].noUiSlider.get(true))
            }
            });

            // When players click on table cell radio button gets selected
            $(document).on("click","td",function(){
                $(this).find("input:radio").prop("checked", true);
            });
        })
    </script>
</head>
<p>
    <b>Aufgabe:</b> Beantworten Sie bitte folgende Fragen.
</p>
{{ for field in demo }}
    {{ formfield field}}
<br>
{{ endfor }}

<div>
    <p>
        <b>Aufgabe:</b> In der Politik reden die Leute oft von 'Links' und 'Rechts', wenn es darum geht, unterschiedliche politische Einstellungen zu kennzeichnen.
        <br>
        Wenn Sie an Ihre eigenen politischen Ansichten denken: Wo würden Sie diese Ansichten einstufen? (Klicken Sie dazu auf den Schieberegler und verschieben ihn.)
    </p>
</div>

<br>
<div style="padding-left: 50px; padding-right: 50px" >
    <div id="slider_pol_views" ></div>
</div>
<br>
<br>
<br>

<!-- otree hidden form field -->
<input type="hidden" name="pol_views" id="pol_views" />

<p>
    <b>Aufgabe:</b> Bitte geben Sie Ihre persönliche Einstellung zu folgenden Aussagen an.
</p>
<table class="likert">
    <col span="1" class="wide">
    <tr>
        <th></th>
        <th>Stimme gar nicht zu</th>
        <th>Stimme nicht zu</th>
        <th>Stimme eher nicht zu</th>
        <th>Neutral</th>
        <th>Stimme eher zu</th>
        <th>Stimme zu</th>
        <th>Stimme voll und ganz zu</th>
    </tr>

    <tr>
        <th></th>
        {{for choice in form.pers_inno1.choices}}
            <th>{{choice}}</th>
        {{endfor}}
    </tr>
    {{ for field in form }}
<!--    counter starts at 1 / skip non-Likert formfields -->
    {{ if forloop.counter > 12 }}
    <tr>
        <td class="likert_label">{{ field.label }}</td>
        {{ for choice in field }}
            <td class="likert_choice">{{ choice }}</td>
        {{ endfor }}
    </tr>
    {{ endif }}
    {{ endfor }}
</table>
<br>
<br>
<hr style="border-top:3px dashed black; background: transparent; opacity: 1 ">
<br>
<div>
    <b>Aufgabe:</b> Auf einer Skala von 0% bis 100% in Schritten von einem Prozentpunkt:
    Geben Sie bitte an, wie wichtig Ihnen persönlich die folgenden Faktoren sind.
</div>
<div>
    <b>Legende:</b>
</div>
<table>
    <tr>
        <td style="padding-right:4px">0%:</td>
        <td>Ich beziehe diesen Faktor gar nicht ein.</td>
    </tr>
    <tr>
        <td style="padding-right:4px">100%:</td>
        <td>Ich beziehe diesen Faktor voll und ganz ein.</td>
    </tr>
</table>
<br>
<table class="importance-table">
    {{ for args in form}}
    {{ if forloop.counter < 4 }}
    <tr>
        <td style="vertical-align: middle">{{ args.label }}</td>
        <td class="importance-slider"><div id="slider_{{ args.name }}"></div></td>
    </tr>
    {{ endif }}
    {{ endfor }}
</table>
<br>
<button id="next-button" class="otree-btn-next btn btn-primary">
    Weiter
</button>
{{ endblock }}